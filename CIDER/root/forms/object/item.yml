method: post

form_error_message: Sorry, there was in error in your submission. Please see below.

model_config:
    resultset: Item

default_args:
    elements:
        Textarea:
            rows: 8

elements:
    - type: Text
      label: Item Number
      name: number
      id: number
      constraints:
        - type: Required

    - type: Text
      label: Item Title
      name: title
      id: title
      constraints:
        - type: Required

    - type: Hidden
      name: creator_count
    - type: Fieldset
      legend: Creators
      elements:
        - type: Repeatable
          nested_name: item_creators
          counter_name: creator_count
          model_config:
            empty_rows: 1
          elements:
            - type: Hidden
              name: id
            - type: Select
              name: name
              empty_first: 1
              model_config:
                resultset: AuthorityName
                delete_if_empty: 1

    - type: Fieldset
      legend: Date
      elements:            
          - type: Checkbox
            label: Circa
            name: circa

          - type: Text
            label: From
            name: date_from
            id: date_from
            constraints:
              - type: Required
              - &Date
                type: Callback
                callback: 'CIDER::Logic::Utils::iso_8601_date'
                message: ISO 8601 date must be YYYY, YYYY-MM, or YYYY-MM-DD

          - type: Text
            label: To
            name: date_to
            id: date_to
            constraint: *Date

    - type: Select
      label: Restrictions
      name: restrictions
      empty_first: 1
      model_config:
        resultset: ItemRestrictions
        label_column: description
        attributes:
          order_by: id

    - type: Text
      name: accession_number
      label: Accession Number

    - type: Select
      label: Type
      name: dc_type
      constraint: Required
      model_config:
        resultset: DCType
        attributes:
          order_by: name

    - type: Hidden
      name: personal_name_count
    - type: Fieldset
      legend: Personal Names
      elements:
        - type: Repeatable
          nested_name: item_personal_names
          counter_name: personal_name_count
          model_config:
            empty_rows: 1
          elements:
            - type: Hidden
              name: id
            - type: Select
              name: name
              empty_first: 1
              model_config:
                resultset: AuthorityName
                delete_if_empty: 1

    - type: Hidden
      name: corporate_name_count
    - type: Fieldset
      legend: Corporate Names
      elements:
        - type: Repeatable
          nested_name: item_corporate_names
          counter_name: corporate_name_count
          model_config:
            empty_rows: 1
          elements:
            - type: Hidden
              name: id
            - type: Select
              name: name
              empty_first: 1
              model_config:
                resultset: AuthorityName
                delete_if_empty: 1

    - type: Hidden
      name: topic_term_count
    - type: Fieldset
      legend: Topic Terms
      elements:
        - type: Repeatable
          nested_name: item_topic_terms
          counter_name: topic_term_count
          model_config:
            empty_rows: 1
          elements:
            - type: Hidden
              name: id
            - type: Select
              name: term
              empty_first: 1
              model_config:
                resultset: TopicTerm
                delete_if_empty: 1

    - type: Hidden
      name: geographic_term_count
    - type: Fieldset
      legend: Geographic Terms
      elements:
        - type: Repeatable
          nested_name: item_geographic_terms
          counter_name: geographic_term_count
          model_config:
            empty_rows: 1
          elements:
            - type: Hidden
              name: id
            - type: Select
              name: term
              empty_first: 1
              model_config:
                resultset: GeographicTerm
                delete_if_empty: 1

    - type: Textarea
      label: Description
      name: description

    - type: Text
      name: volume
      label: Volume

    - type: Text
      name: issue
      label: Issue

    - type: Textarea
      name: abstract
      label: Abstract

    - type: Textarea
      name: citation
      label: Bibliographic Citation
      
    - type: Hidden
      name: parent


    - type: Submit
      name: submit
